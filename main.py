"""
Title: Rat Castle
Creators: Samson and Brycen
Description: You fight rats in a Castle
"""
#Setup game
scene.set_tile_map(img("""
    eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
    eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
    eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
    eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
    eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffffffffffffffffffffffeeeeeefffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    fffffffffffffffffffffffffffffffffffffffffeeeffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
    ffffffffffeeeefffffffffffffffffffffffeeeffffffffffffffffffffffff
    ffffffffffffffffffffffffffffffffffffffffffffffffffffffeeeeeeeeee
    eeeeeeeeffffffffeeeeeeeeeeeeeeeeeeeefffffffffffeffffffeeeeeeeeee
    eeeeeeee44444444eeeeeeeeeeeeeeeeeeee44444444444eeeeeeeeeeeeeeeee
"""))
scene.set_tile(14,
    img("""
        b b b b b b b b b b b b b b b f
        b b b b b b b b b b b b b b b f
        b b b b b b b b b b b b b b b f
        b b b b b b b b b b b b b b b f
        b b b b b b b b b b b b b b b f
        b b b b b b b b b b b b b b b f
        b b b b b b b b b b b b b b b f
        f f f f f f f f f f f f f f f f
        b b b b b b b f b b b b b b b f
        b b b b b b b f b b b b b b b f
        b b b b b b b f b b b b b b b f
        b b b b b b b f b b b b b b b f
        b b b b b b b f b b b b b b b f
        b b b b b b b f b b b b b b b f
        b b b b b b b f b b b b b b b f
        f f f f f f f f f f f f f f f f
    """),
    True)
scene.set_tile(4,
    img("""
        . . . 4 . . . 4 . . 4 . . . 4 4
        . 4 4 4 . 4 4 4 . 4 4 . . 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
    """),
    True)
info.set_score(0)
info.set_life(3)

#Setup character
average_joe = sprites.create(img("""
    ...........eeeeeee..............
    ..........eeeeeeeee.............
    ..........eeeeedddd.............
    ..........eeeeddddd.............
    ..........eededfddf.............
    ..........eeddddddd.............
    ..........eeddddddd.............
    ..........eeedddffd.......111111
    ...........eddddddd.......111111
    ............dddddd........11....
    ..........1111111111ddddddddd...
    ..........1111111111ddddddddd...
    ..........1111111111......dd....
    ..........dd111111..............
    ..........dd111111..............
    ..........dd111111..............
    ..........dd111111..............
    ..........dd111111..............
    ..........dd111111..............
    ..........dd111111..............
    .........ddd888888..............
    .........ddd888888..............
    .........ddd888.88..............
    ............888.88..............
    ............888.88..............
    ............888.88..............
    ............888.88..............
    ............888.88..............
    ............888.88..............
    ............888.88..............
    ............eee.eee.............
    ............eeeeeeee............
"""))
controller.move_sprite(average_joe, 90, 0)
average_joe.set_position(15, 190)
scene.camera_follow_sprite(average_joe)
def on_event_pressed():
    average_joe.vy = -150
controller.A.on_event(ControllerButtonEvent.PRESSED, on_event_pressed)
average_joe.ay = 250
average_joe.set_kind(SpriteKind.player)

#Make gun
def on_event_pressed2():
    projectile = sprites.create_projectile_from_sprite(img("""
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ......................................................111.......
        .....................................................11111......
        .....................................................11111......
        .....................................................11111......
        ......................................................111.......
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
    """), average_joe, 200, 0)
controller.B.on_event(ControllerButtonEvent.PRESSED, on_event_pressed2)


#Make enemies
rat = sprites.create(img("""
    ................................
    ................................
    ................................
    .......eeeee.......eeee.........
    ......eeeeeee.....eeeeee........
    ......eeeeeee.....eeeeee........
    ......eeeeeee.....eeeeee........
    ......eeeeeee..eeeeeeeee........
    .......eeeeeeeeeeeeeeeee........
    ........eeeeeeeeeeeeeeee........
    ..........eeeeeeeeeeee..........
    ..........efeeeefeeee...........
    ..........efeeeefeeee...........
    .....eeddddddddddddee...........
    ......eddddddddddddee...........
    ........ddddddddddde............
    .........dddddddddd.............
    ..........eedddde...............
    .........eedddddeee.............
    ........eeeddddddeeee...........
    .......e.edddddddde.ee..........
    ......e..edddddddde..e.....e....
    .....ee..edddddddde..e..eeee....
    ....ee...edddddddde..e.ee.......
    ....e....edddddddeee...e........
    .........eeeeeeeee..eeee........
    ..........eee.eeee..............
    ..........eee.eeee..............
    ..........eee.eeee..............
    .........eeee.eeeee.............
    ........eeeee..eeee.............
    ........eeeee..eeee.............
"""))
rat.set_position(300, 190)
rat.set_kind(SpriteKind.enemy)
rat.ay = 150

rat2 = sprites.create(img("""
    ................................
    ................................
    ................................
    .......eeeee.......eeee.........
    ......eeeeeee.....eeeeee........
    ......eeeeeee.....eeeeee........
    ......eeeeeee.....eeeeee........
    ......eeeeeee..eeeeeeeee........
    .......eeeeeeeeeeeeeeeee........
    ........eeeeeeeeeeeeeeee........
    ..........eeeeeeeeeeee..........
    ..........efeeeefeeee...........
    ..........efeeeefeeee...........
    .....eeddddddddddddee...........
    ......eddddddddddddee...........
    ........ddddddddddde............
    .........dddddddddd.............
    ..........eedddde...............
    .........eedddddeee.............
    ........eeeddddddeeee...........
    .......e.edddddddde.ee..........
    ......e..edddddddde..e.....e....
    .....ee..edddddddde..e..eeee....
    ....ee...edddddddde..e.ee.......
    ....e....edddddddeee...e........
    .........eeeeeeeee..eeee........
    ..........eee.eeee..............
    ..........eee.eeee..............
    ..........eee.eeee..............
    .........eeee.eeeee.............
    ........eeeee..eeee.............
    ........eeeee..eeee.............
"""))
rat2.set_position(400, 190)
rat2.set_kind(SpriteKind.enemy)
rat2.ay = 150

rat3 = sprites.create(img("""
    ................................
    ................................
    ................................
    .......eeeee.......eeee.........
    ......eeeeeee.....eeeeee........
    ......eeeeeee.....eeeeee........
    ......eeeeeee.....eeeeee........
    ......eeeeeee..eeeeeeeee........
    .......eeeeeeeeeeeeeeeee........
    ........eeeeeeeeeeeeeeee........
    ..........eeeeeeeeeeee..........
    ..........efeeeefeeee...........
    ..........efeeeefeeee...........
    .....eeddddddddddddee...........
    ......eddddddddddddee...........
    ........ddddddddddde............
    .........dddddddddd.............
    ..........eedddde...............
    .........eedddddeee.............
    ........eeeddddddeeee...........
    .......e.edddddddde.ee..........
    ......e..edddddddde..e.....e....
    .....ee..edddddddde..e..eeee....
    ....ee...edddddddde..e.ee.......
    ....e....edddddddeee...e........
    .........eeeeeeeee..eeee........
    ..........eee.eeee..............
    ..........eee.eeee..............
    ..........eee.eeee..............
    .........eeee.eeeee.............
    ........eeeee..eeee.............
    ........eeeee..eeee.............
"""))
rat3.set_position(500, 190)
rat3.set_kind(SpriteKind.enemy)
rat3.ay = 150

def on_overlap(sprite, otherSprite):
    sprite.destroy()
    otherSprite.destroy()
    info.change_score_by(1)
sprites.on_overlap(SpriteKind.enemy, SpriteKind.projectile, on_overlap)

#Make lava work
def on_hit_tile(sprite):
    info.change_life_by(-1)
scene.on_hit_tile(SpriteKind.player, 4, on_hit_tile)

#Make rats kill joe
def on_overlap2(sprite, otherSprite):
    info.change_life_by(-1)
sprites.on_overlap(SpriteKind.player, SpriteKind.enemy, on_overlap2)

#Make giant rat
giant_rat = sprites.create(img("""
    ....................eeee.........eeeeeee........................
    .................eeeeeeeee......eeeeeeeee.......................
    ................eeeeeeeeeee.....eeeeeeeee.......................
    ................eeeeeeeeeee.....eeeeeeeee.......................
    ................eeeeeeeeeee.....eeeeeeeee.......................
    .................eeeeeeeeee......eeeeeeee.......................
    .................eeeeeeeeeeeeeeeeeeeeeeee.......................
    ..................eeeeeeeeeeeeeeeeeeeeeee.......................
    ..................eeeeeeeeeeeeeeeeeeeeee........................
    ....................eeeeefeeeeeefeeeeee.........................
    ......................eeeefeeeefeeeeeee.........................
    ......................eeeeefeefeeeeeeee.........................
    ......................eeeffeeeeffeeeeee.........................
    .......................eeffeeeeffeeeeee.........................
    .......................eeeeeeeeeeeeeeee.........................
    .................eeedddddddddddddddddee.........................
    ..................eeddddddddddddddddde..........................
    ...................edddddf1f1f1fddddd...........................
    ....................dddd1f1f1f1f1dd.............................
    ......................dd1f1f1f1f1d..............................
    .....................eeeeeeeeeeeeeeeeee.........................
    ..................eeeeeeeddddddddddeeeeeee......................
    ................eeeeeeeeddddddddddddeeeeeeee....................
    ...............eeeeeeeedddddddddddddeeeeeeeeee..................
    .............eeeeeeeeedddddddddddddddeeeeeeeeee.................
    ............eeeeeeeeedddddddddddddddddeeeeeeeeeee...............
    ...........eeeeeeeeedddddddddddddddddddeeeeeeeeeee..............
    ..........eeeeeeeeeedddddddddddddddddddeeeeeeeeeeee.............
    .........eeeeeeeeeeeddddddddddddddddddddeeeeeeeeeee.............
    ........eeeeeeeeeeedddddddddddddddddddddeeeeeeeeeeee............
    .......eeeeeeeeeeeeddddddddddddddddddddddeeeeeeeeeee............
    .......eeeeeeeeeeedddddddddddddddddddddddeeeeeeeeeeee...........
    ......eeeeeeeeeeeeddddddddddddddddddddddddeeeeeeeeeee...........
    .....eeeeeeeeeeeedddddddddddddddddddddddddeeeeeeeeeeee..........
    .....eeeeeeeeeeeeddddddddddddddddddddddddddeeeeeeeeeee..........
    ....eeeeeeeeeeeedddddddddddddddddddddddddddeeeeeeeeeee..........
    ....eeeeeeeeeeeedddddddddddddddddddddddddddeeeeeeeeeee..........
    ....eeeeeeeeeeeedddddddddddddddddddddddddddeeeeeeeeeee..........
    ....eeeeeeeeeeeedddddddddddddddddddddddddddeeeeeeeeeeee.........
    ....eeeeeeeeeeedddddddddddddddddddddddddddde.eeeeeeeeee.........
    ....eeeeeeeeeeedddddddddddddddddddddddddddde.eeeeeeeeee.........
    ....eeeeeeeeeeedddddddddddddddddddddddddddde.eeeeeeeeee.........
    .....eeeeeeee.edddddddddddddddddddddddddddde.eeeeeeeeee.........
    .....eeeeeeee.eeddddddddddddddddddddddddddde..eeeeeeeeee........
    .....eeeeeee...eedddddddddddddddddddddddddde..eeeeeeeeee........
    ......eeeeee.....eddddddddddddddddddddddddee...eeeeeeeee........
    .......eeee.....eeeddddddddddddddddddddddeee...eeeeeeeee........
    .................eeeddddddddddddddddddddeee.....eeeeeeee........
    .................eeeeeddddddddddddddddeeeee......eeeeeee........
    ..................eeeeeeeedddddddddddeeeeee......eeeeee.........
    ..................eeeeeeeeeeeeeeeeeeeeeeee.......eeeee..........
    ..................eeeeeeeee......eeeeeeeee......................
    ..................eeeeeeeee......eeeeeeeee......................
    ..................eeeeeeeee......eeeeeeeee......................
    ..................eeeeeeeee......eeeeeeeee......................
    ..................eeeeeeeee......eeeeeeeee......................
    ..................eeeeeeeee......eeeeeeeee......................
    .................eeeeeeeeee......eeeeeeeeee.....................
    .................eeeeeeeeee......eeeeeeeeeee....................
    ................eeeeeeeeeee......eeeeeeeeeeee...................
    ...............eeeeeeeeeee........eeeeeeeeeee...................
    ..............eeeeeeeeeeee........eeeeeeeeeeee..................
    .............eeeeeeeeeeeee.........eeeeeeeeeeeee................
    ............eeeeeeeeeeeee...........eeeeeeeeeeee................
"""))
giant_rat.set_position(1000, 160)
fireball = sprites.create_projectile_from_sprite(img("""
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . 4 4 . . . . . . .
    . . . . . . 4 4 4 4 . . . . . .
    . . . . . . 4 4 4 4 . . . . . .
    . . . . . . 4 4 4 4 . . . . . .
    . . . . . . . 4 4 . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
"""), giant_rat, 100, 0)
def on_destroyed(sprite):
    projectile = sprites.create_projectile_from_sprite(img("""
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ..4444..........................................................
        .444444.........................................................
        44444444........................................................
        44444444........................................................
        44444444........................................................
        44444444........................................................
        .444444.........................................................
        ..4444..........................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
    """), giant_rat, -100, 50)
sprites.on_destroyed(SpriteKind.projectile, on_destroyed)
giant_rat.set_kind(SpriteKind.enemy)

#Make fireballs kill joe
def on_overlap3(sprite, otherSprite):
    info.change_life_by(-1)
sprites.on_overlap(SpriteKind.player, SpriteKind.projectile, on_overlap3)
def on_destroyed2(sprite):
    average_joe.set_position(15, 190)
sprites.on_destroyed(SpriteKind.player, on_destroyed2)